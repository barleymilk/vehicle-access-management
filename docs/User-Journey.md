# 차량 출입 관리 시스템 사용자 여정 (User Journey)

## 1. 핵심 사용자 페르소나

### 페르소나 A: 보안 관리자 (김보안)

**역할**: 출입 보안 총괄  
**목표**: 안전하고 효율적인 차량 출입 관리  
**주요 업무**:

- 실시간 출입 모니터링
- VIP/FREE PASS 차량 특별 관리
- 이상 상황 대응

### 페르소나 B: 시설 관리자 (이시설)

**역할**: 일반 출입 관리  
**목표**: 원활한 방문자 접수 및 데이터 관리  
**주요 업무**:

- 차량 등록 및 출입 승인
- 미등록 데이터 정리
- 일일 현황 보고

### 페르소나 C: 시스템 관리자 (박시스)

**역할**: 시스템 운영 및 유지보수  
**목표**: 시스템 안정성 및 데이터 품질 관리  
**주요 업무**:

- 사용자 권한 관리
- 데이터 정리 및 백업
- 성능 모니터링

## 2. 주요 사용자 여정

### 2.1 차량 출입 등록 여정

#### 2.1.1 등록된 차량 출입 (Happy Path)

```
[차량 도착] → [번호 입력] → [DB 조회] → [차량 발견]
                                             ↓
[VIP/FREE PASS 확인] → [연관 정보 표시] → [빠른 승인]
                                             ↓
[출입 기록 저장] → [완료 안내] → [모니터링 대시보드 업데이트]
```

**상세 플로우**:

1. **차량 번호 입력**

   - 키패드로 번호 입력: "1234"
   - 자동 포맷팅: "1234"
   - "차량찾기" 버튼 클릭

2. **등록 차량 확인**

   - 차량 정보 즉시 표시
   - VIP 배지 표시 (Family = 블루, Special = 골드)
   - FREE PASS 배지 표시 (활성화된 경우)

3. **연관 정보 선택**

   - 차량 소유자/운전자 목록 표시
   - VIP 등급별 우선 정렬
   - 진행 중인 작업 목록 (있는 경우)

4. **출입 승인**

   - 방문 목적 입력 (선택)
   - 동승자 정보 (선택)
   - "출입 승인" 버튼 클릭

5. **완료 처리**
   - 성공 메시지 표시
   - 실시간 대시보드 업데이트
   - VIP인 경우 특별 알림

#### 2.1.2 미등록 차량 출입 (Alternative Path)

```
[차량 도착] → [번호 입력] → [DB 조회] → [차량 없음]
                                             ↓
[미등록 안내] → [필수 정보 입력] → [즉시 승인]
                     ↓                    ↓
[운전자명만 필수] → [선택사항은 나중에] → [출입 허용]
                                             ↓
[미등록 리스트 추가] → [일일 정리 대상] → [정식 등록 검토]
```

**상세 플로우**:

1. **미등록 상태 확인**

   - "DB에 없는 차량입니다" 안내
   - 미등록 차량 입력 폼 표시

2. **최소 정보 입력**

   - 운전자명 입력 (필수)
   - 나머지는 모두 선택사항 안내

3. **선택 정보 입력**

   - 연락처 (권장)
   - 소속 (권장)
   - 차량 종류 (선택)
   - 방문 목적 (선택)

4. **즉시 출입 허용**
   - 운전자명만으로 즉시 승인
   - 미등록 플래그 설정
   - 일일 미등록 리스트에 추가

### 2.2 VIP 관리 여정

#### 2.2.1 VIP 차량 출입 특별 처리

```
[VIP 차량 입력] → [VIP 등급 확인] → [특별 UI 표시]
                        ↓                    ↓
[Family: 블루 테마] [Special: 골드 테마] → [우선 처리]
                                             ↓
[보안팀 알림] → [상세 모니터링] → [특별 기록 관리]
```

**김보안(보안 관리자)의 VIP 관리 여정**:

1. **사람 정보 수정에서 VIP 등급 설정**

   - 사람 목록에서 수정 대상 검색
   - 기존 VIP 등급 확인
   - "정보 수정" 화면 진입

2. **인라인 VIP 등급 설정**

   - 기본 정보 입력/수정 섹션
   - VIP 등급 설정 섹션 (라디오 버튼)
   - None/Family/Special 중 선택
   - 실시간 배지 미리보기 확인

3. **즉시 반영 및 모니터링**
   - 저장 버튼으로 즉시 반영
   - 실시간 대시보드에서 VIP 현황 확인
   - 색상별 구분 (Family=블루, Special=골드)
   - VIP 출입 시 특별 표시 확인

#### 2.2.2 VIP 인라인 설정 플로우

```
[사람 목록] → [수정 대상 선택] → [정보 수정 화면]
                                    ↓
[기본 정보 입력] → [VIP 등급 섹션] → [라디오 버튼 선택]
                                    ↓
[None/Family/Special] → [실시간 배지 미리보기] → [저장]
                                                  ↓
[즉시 반영] → [시스템 업데이트] → [VIP 특별 처리 시작]
```

### 2.3 FREE PASS 관리 여정

#### 2.3.1 차량 정보 수정에서 FREE PASS 설정

```
[차량 목록] → [수정 대상 선택] → [차량 정보 수정 화면]
                                    ↓
[기본 정보 입력] → [FREE PASS 섹션] → [토글 스위치 조작]
                                      ↓
[활성화/비활성화] → [배지 미리보기] → [저장]
                                      ↓
[즉시 반영] → [시각적 표시] → [보안팀 모니터링]
```

**김보안(보안 관리자)의 FREE PASS 인라인 관리**:

1. **차량 정보 수정에서 FREE PASS 설정**

   - 차량 목록에서 수정 대상 검색
   - 기존 FREE PASS 상태 확인
   - "차량 정보 수정" 화면 진입

2. **인라인 FREE PASS 토글**

   - 기본 정보 입력/수정 섹션
   - FREE PASS 설정 섹션 (토글 스위치)
   - 즉시 활성화/비활성화
   - 실시간 배지 미리보기 확인

3. **즉시 반영 및 모니터링**
   - 저장 버튼으로 즉시 반영
   - 실시간 FREE PASS 차량 추적
   - 사용 빈도 통계 확인
   - 이상 패턴 감지 시 알림

### 2.4 미등록 데이터 관리 여정

#### 2.4.1 일일 미등록 데이터 정리

```
[미등록 리스트 접근] → [날짜별 조회] → [데이터 검토]
                                           ↓
[유사 데이터 검색] → [매칭 제안] → [정식 등록 여부 결정]
                                           ↓
[추가 정보 입력] → [정식 등록] → [기존 기록 연결]
```

**이시설(시설 관리자)의 데이터 정리 여정**:

1. **일일 미등록 현황 확인**

   - 당일 미등록 차량/사람 목록 조회
   - 등록 전환 필요성 검토
   - 우선순위 설정 (방문 빈도 기준)

2. **유사 데이터 검색**

   - 비슷한 차량 번호/이름 검색
   - 자동 매칭 제안 확인
   - 중복 가능성 체크

3. **정식 등록 전환**

   - 추가 정보 입력 (연락처, 상세 소속 등)
   - Person/Vehicle 테이블에 정식 등록
   - 기존 출입 기록과 연결

4. **데이터 품질 개선**
   - 불완전한 정보 보완
   - 정기적 데이터 정리
   - 시스템 성능 최적화

#### 2.4.2 미등록 → 등록 전환 상세 플로우

```
[미등록 기록 선택] → [기존 데이터 확인] → [매칭 점수 확인]
                                              ↓
[100점: 정확일치] [70-90: 부분일치] [50-70: 유사패턴]
                                              ↓
[매칭 데이터 선택] → [추가 정보 입력] → [등록 완료]
                                              ↓
[기존 기록 연결] → [is_registered 플래그 업데이트]
```

### 2.5 관계 관리 여정

#### 2.5.1 사람-차량 관계 설정

```
[사람 선택] → [차량 선택] → [관계 유형 선택]
                              ↓
[Owner/Driver 구분] → [관계 생성] → [연관 정보 업데이트]
                                      ↓
[출입 시 자동 연결] → [통합 정보 표시]
```

#### 2.5.2 사람-작업 관계 설정

```
[작업 생성] → [참여자 선택] → [상태 설정]
                              ↓
[Scheduled/In-progress/Completed] → [출입 권한 연동]
                                      ↓
[작업 기반 출입 승인] → [진행도 추적]
```

## 3. 에러 시나리오 및 복구 여정

### 3.1 시스템 오류 상황

#### 3.1.1 네트워크 연결 실패

```
[DB 조회 실패] → [오프라인 모드 안내] → [임시 저장]
                                          ↓
[네트워크 복구 확인] → [데이터 동기화] → [정상 서비스 재개]
```

#### 3.1.2 데이터 충돌 상황

```
[중복 데이터 감지] → [충돌 내용 표시] → [해결 방안 제시]
                                          ↓
[사용자 선택] → [자동 병합] 또는 [수동 해결] → [데이터 정리]
```

### 3.2 사용자 실수 상황

#### 3.2.1 잘못된 차량 번호 입력

```
[차량 번호 입력] → [형식 검증 실패] → [오류 메시지 표시]
                                          ↓
[올바른 형식 안내] → [재입력 유도] → [자동 포맷팅 지원]
```

#### 3.2.2 VIP 등급 잘못 설정

```
[등급 변경] → [확인 대화상자] → [변경 이력 기록]
                                  ↓
[실수 발견] → [이력 조회] → [이전 상태 복원]
```

## 4. 권한별 사용자 여정

### 4.1 OPERATOR (운영자) 여정

**제한 사항**: 기본 조회 및 입력만 가능

```
[로그인] → [대시보드 조회] → [차량 출입 처리]
              ↓                    ↓
[기본 통계만] → [등록/미등록 처리] → [권한 제한 알림]
```

### 4.2 MANAGER (매니저) 여정

**추가 권한**: VIP 관리, 미등록 데이터 정리

```
[로그인] → [전체 대시보드] → [VIP 관리] + [미등록 정리]
              ↓                    ↓              ↓
[상세 통계] → [등급 설정 가능] → [정식 등록 전환]
```

### 4.3 ADMIN (관리자) 여정

**추가 권한**: FREE PASS 관리, 데이터 삭제

```
[로그인] → [전체 권한] → [FREE PASS 설정] + [시스템 관리]
              ↓              ↓                    ↓
[모든 기능] → [보안 정책] → [데이터 삭제/수정]
```

## 5. 모바일/터치 최적화 여정

### 5.1 터치 기반 차량 번호 입력

```
[터치 스크린] → [가상 키패드] → [큰 버튼 터치]
                                  ↓
[실시간 포맷팅] → [시각적 피드백] → [음성 안내]
```

### 5.2 빠른 액세스 기능

```
[자주 사용 기능] → [빠른 버튼] → [원터치 실행]
                                    ↓
[VIP 차량 조회] [미등록 정리] [FREE PASS 모니터링]
```

## 6. 실시간 협업 여정

### 6.1 다중 사용자 동시 접근

```
[사용자A 입력] → [실시간 동기화] → [사용자B 확인]
                                      ↓
[충돌 방지] → [락 메커니즘] → [순차 처리]
```

### 6.2 팀 협업 시나리오

```
[보안팀 모니터링] → [이상 상황 감지] → [시설팀 알림]
                                          ↓
[즉시 대응] → [상황 공유] → [협력 해결]
```

## 7. 학습 및 개선 여정

### 7.1 신규 사용자 온보딩

```
[첫 로그인] → [가이드 투어] → [기본 기능 학습]
                                  ↓
[실습 모드] → [단계별 안내] → [숙련도 확인]
```

### 7.2 시스템 개선 피드백

```
[사용 중 불편사항] → [피드백 수집] → [개선사항 반영]
                                        ↓
[업데이트 알림] → [새 기능 안내] → [사용법 교육]
```

## 8. 성능 최적화 사용자 경험

### 8.1 빠른 검색 경험

```
[검색어 입력] → [실시간 검색] → [즉시 결과 표시]
                   ↓                ↓
[디바운싱] → [캐시 활용] → [1초 이내 응답]
```

### 8.2 대량 데이터 처리

```
[큰 데이터셋] → [페이징 처리] → [점진적 로딩]
                                  ↓
[스켈레톤 UI] → [백그라운드 로딩] → [부드러운 경험]
```
